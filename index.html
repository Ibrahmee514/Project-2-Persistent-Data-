<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple CRUD App</title>

    <style>
        body {
            background: #121212;
            color: #ffffff;
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }
        
        h1 {
            text-align: center;
        }
        
        input,
        textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
            border: none;
        }
        
        button {
            padding: 10px 15px;
            margin-top: 5px;
            cursor: pointer;
            background: #4CAF50;
            border: none;
            color: white;
            border-radius: 4px;
        }
        
        .item {
            background: #1e1e1e;
            padding: 15px;
            margin-top: 15px;
            border-radius: 6px;
        }
        
        .btn-delete {
            background: #e53935;
            margin-left: 5px;
        }
        
        .btn-update {
            background: #1976d2;
        }
    </style>
</head>

<body>
    <h1>My Data App</h1>

    <!-- CREATE FORM -->
    <h3>Add Item</h3>
    <input id="title" placeholder="Title" />
    <textarea id="description" placeholder="Description"></textarea>
    <button onclick="createItem()">Add</button>

    <hr>

    <h3>Your Items</h3>
    <div id="items"></div>

    <script>
        const API_URL = "http://localhost:5000/api/items";

        // Fetch & display items
        async function loadItems() {
            const res = await fetch(API_URL);
            const data = await res.json();

            const container = document.getElementById("items");
            container.innerHTML = "";

            data.forEach(item => {
                const div = document.createElement("div");
                div.className = "item";

                div.innerHTML = `
          <strong>${item.title}</strong><br>
          <p>${item.description || ""}</p>

          <input id="edit-title-${item._id}" placeholder="New title" />
          <input id="edit-desc-${item._id}" placeholder="New description" />

          <button class="btn-update" onclick="updateItem('${item._id}')">Update</button>
          <button class="btn-delete" onclick="deleteItem('${item._id}')">Delete</button>
        `;

                container.appendChild(div);
            });
        }

        // CREATE
        async function createItem() {
            const title = document.getElementById("title").value;
            const description = document.getElementById("description").value;

            await fetch(API_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title,
                    description
                })
            });

            document.getElementById("title").value = "";
            document.getElementById("description").value = "";
            loadItems();
        }

        // UPDATE
        async function updateItem(id) {
            const title = document.getElementById(`edit-title-${id}`).value;
            const description = document.getElementById(`edit-desc-${id}`).value;

            await fetch(`${API_URL}/${id}`, {
                method: "PUT",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title,
                    description
                })
            });

            loadItems();
        }

        // DELETE
        async function deleteItem(id) {
            await fetch(`${API_URL}/${id}`, {
                method: "DELETE"
            });
            loadItems();
        }

        // Load on start
        loadItems();
    </script>
</body>

</html>